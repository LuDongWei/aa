/*! subscibe 1.0.0 pub 2014-06-16 15:34 by douban */
define("mbb/subscibe/1.0.0/subscibe",["jquery","simplemodal","./subscibe.css"],function(a,b){function c(){var a='<div class="sb-content" id="subscibe" style="background-color:'+h.bkClose+';" ><div class="sb-head"><div class="sb-name" style="color:'+h.maClose+';">'+h.title+'</div><div class="sb-close"><i class="cl-i" style="background-color:'+h.maClose+';">X</i></div></div><div class="sb-content"><div class="sb-main"><div class="m-text"><label for="sb-phone" class="sb-hint default" id="sb-noto" >'+h.input+'</label><input type="text" class="in-1" id="sb-phone" autofocus ></div><div class="m-submit" ><input type="submit" class="in-2" id="sb-submit" value="'+h.button+'" style="background-color:'+h.maClose+"; color:"+h.bkClose+';"></div></div></div></div>';return a}function d(a,b,c){return f.ajax({url:i,type:"get",dataType:"jsonp",jsonp:"jsoncallback",data:{id:a,mobile:b,tag:c}})}function e(a){for(var b="5 10 5 0 -5 -10 -5 0".split(" "),c=function(c){var d=20;setTimeout(function(){a.css("left",b[c]+"px")},d*c)},d=0;d<b.length;d++)c(d)}var f=a("jquery");a("simplemodal")(f),a("./subscibe.css");var g=b,h={id:"",sku:"",bkClose:"#fdd131",maClose:"#40316a",title:"\u79d2\u6740\u5f00\u59cb\u63d0\u9192",input:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801",inputWarn:"\u624b\u673a\u53f7\u7801\u4e0d\u6b63\u786e",button:"\u5f00\u59cb\u63d0\u9192\u6211",regular:/^[1][3-8]\d{9}/,succeed_:function(){},false_:function(){}},i="http://www.mbaobao.com/ajax/SendSmsSubscribe";g.install=function(a){var b=(f.extend(h,a||{}),null),g=!0,i=f.modal(c(),{closeClass:"cl-i",onShow:function(a){b=a.container,a.container.find(".m-text").on("click",function(){return f(this).find("#sb-phone").focus(),!1}),a.container.find("#sb-phone").on("keyup",function(){var a=f(this).val();""===a?b.find("#sb-noto").html(h.input).removeClass("warn").css({"z-index":"999"}):b.find("#sb-noto").css({"z-index":"997"})})}});b.find("#sb-submit").on("click",function(){if(g){g=!1;var a=b.find("#sb-phone").val();h.regular.test(a)?d(h.id,a,h.sku).done(function(a){"1"===a.success?h.succeed_("\u6210\u529f",i):h.false_(a.msg,i),g=!0}):(b.find("#sb-phone").val(""),e(b.find("#sb-phone")),f("#sb-noto").html(h.inputWarn).addClass("warn").css({"z-index":"999"}),setTimeout(function(){f("#sb-noto").css({"z-index":"997"}),b.find("#sb-phone").val(a),g=!0},500))}})}}),define("mbb/subscibe/1.0.0/subscibe.css",[],function(){seajs.importStyle(".sb-content{width:430px;height:173px;background-color:#fdd131}.sb-content .sb-head{width:430px;height:40px;overflow:hidden}.sb-head .sb-name{width:358px;height:40px;line-height:40px;font-size:18px;font-weight:bolder;text-align:left;padding-left:12px;float:left;font-family:'\u5fae\u8f6f\u96c5\u9ed1';color:#40316a}.sb-head .sb-close{width:60px;height:40px;line-height:40px;text-align:center;float:left}.sb-close .cl-i{display:block;width:28px;height:28px;border-radius:14px;margin-left:16px;margin-top:6px;font-style:normal;text-align:center;cursor:pointer;line-height:28px;font-family:'\u5fae\u8f6f\u96c5\u9ed1';background-color:#40316a;color:#fff}.sb-content .sb-content{width:428px;height:132px;background-color:#fff;margin:0 auto;position:relative}.sb-content .sb-main{position:absolute;top:45px;left:55px;height:40px;width:318px;overflow:hidden}.sb-main .m-text{width:178px;height:40px;float:left;position:relative}.sb-main .m-submit{width:125px;height:40px;margin-left:10px;float:left}.sb-main .in-1{width:164px;height:24px;line-height:24px;font-size:18px;text-align:left;padding:7px 6px;border:1px solid #b4b4b4;position:absolute;font-family:'\u5fae\u8f6f\u96c5\u9ed1';top:0;left:0;z-index:998}.sb-main .in-2{width:125px;height:40px;font-size:18px;font-weight:bolder;border:0;text-align:center;cursor:pointer;font-family:'\u5fae\u8f6f\u96c5\u9ed1';background-color:#40316a;color:#fdd131}.sb-main .in-2:hover{filter:alpha(opacity=90);opacity:.9}.sb-main .m-text .default{color:#bfbfbf}.sb-main .m-text .warn{color:#e63d3d}.m-text .sb-hint{position:absolute;height:24px;line-height:24px;font-family:'\u5fae\u8f6f\u96c5\u9ed1';font-size:16px;top:7px;left:9px;z-index:999}.simplemodal-overlay{background-color:#000}")});
